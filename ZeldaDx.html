<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <title>Link Awakening</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="JadsdsEngine_min.js" defer></script>
    <script src="ZeldaDx.js" defer></script>
    <link href="styles/main.css" rel="stylesheet" />
  </head>
  <body>
    <!--Barre avec le titre et le time de gameboy-->
    <!-- <div
      style="
        position: absolute;
        left: 20px;
        top: 10px;
        width: 470px;
        height: 34px;
      "
    >
      <img src="styles/images/zeldat.png" />
    </div> -->

    <!-- <div
      class="divZelda"
      id="divmapzAudioD"
      style="
        position: absolute;
        left: 850px;
        top: 12px;
        width: 23px;
        height: 25px;
        cursor: pointer;
      "
    >
      <canvas
        id="zAudioD"
        width="23"
        height="25"
        style="border-style: solid; border-width: 0px"
      ></canvas>
    </div> -->

    <!-- <div class="imgGBColor" onclick="color();" id="gbColors"></div>

    <div class="imgGBClassicb" onclick="yellow();" id="gbClassic"></div> -->
    <div class="map-container">
      <div id="map">
        <div class="gameBoy" id="divGameBoy">&nbsp;</div>

        <div class="divZelda" id="divzdxTalTalMountainc">
          <canvas
            id="mapzdxTalTalMountainc"
            width="960"
            height="512"
            class="canvasClass"
          ></canvas>
        </div>

        <div class="divZelda" id="divzdxTalTalMountainb">
          <canvas
            id="mapzdxTalTalMountainb"
            width="856"
            height="480"
            class="canvasClass"
          ></canvas>
        </div>

        <div class="divZelda" id="divzdxTalTalMountain">
          <canvas
            id="mapzdxTalTalMountain"
            width="744"
            height="480"
            class="canvasClass"
          ></canvas>
        </div>

        <div class="divZelda" id="divzdxForest">
          <canvas
            id="mapzdxForest"
            width="960"
            height="528"
            class="canvasClass"
          ></canvas>
        </div>

        <div class="divZelda" id="divzdxCastle">
          <canvas
            id="mapzdxCastle"
            width="944"
            height="560"
            class="canvasClass"
          ></canvas>
        </div>

        <div class="divZelda" id="divzdxFalls">
          <canvas
            id="mapzdxFalls"
            width="656"
            height="496"
            class="canvasClass"
          ></canvas>
        </div>

        <div class="divZelda" id="divzdxMabe">
          <canvas
            id="mapzdxMabe"
            width="736"
            height="480"
            class="canvasClass"
          ></canvas>
        </div>

        <div class="divZelda" id="divzdxUkuku">
          <canvas
            id="mapzdxUkuku"
            width="1168"
            height="480"
            class="canvasClass"
          ></canvas>
        </div>

        <div class="divZelda" id="divzdxFaceShrine">
          <canvas
            id="mapzdxFaceShrine"
            width="656"
            height="544"
            class="canvasClass"
          ></canvas>
        </div>

        <div class="divZelda" id="divzdxMabeb">
          <canvas
            id="mapzdxMabeb"
            width="960"
            height="528"
            class="canvasClass"
          ></canvas>
        </div>

        <div class="divZelda" id="divzdxLake">
          <canvas
            id="mapzdxLake"
            width="832"
            height="528"
            class="canvasClass"
          ></canvas>
        </div>

        <div class="divZelda" id="divzdxDesert">
          <canvas
            id="mapzdxDesert"
            width="768"
            height="528"
            class="canvasClass"
          ></canvas>
        </div>
      </div>
    </div>
  </body>

  <script>
    //-----------------------------------------------------------------------------------------------------

    const map = document.getElementById("map");
    const mapWidth = 2560;
    const mapHeight = 2048;
    //temps de déplacement animation (10s)
    const duration = 10000;

    function moveMapToRandomLocation() {
      const targetX = Math.random() * (mapWidth - window.innerWidth);
      const targetY = Math.random() * (mapHeight - window.innerHeight);
      smoothScroll(targetX, targetY, duration);
    }

    function smoothScroll(targetPositionX, targetPositionY, duration) {
      const startPositionY = window.scrollY;
      const distanceY = targetPositionY - startPositionY;
      const startPositionX = window.scrollX;
      const distanceX = targetPositionX - startPositionX;
      const startTime = performance.now();

      function step(currentTime) {
        const elapsedTime = currentTime - startTime;
        const progress = Math.min(elapsedTime / duration, 1);

        window.scrollTo(
          startPositionX + distanceX * progress,
          startPositionY + distanceY * progress
        );

        if (progress < 1) {
          window.requestAnimationFrame(step);
        }
      }

      window.requestAnimationFrame(step);
    }

    //Temps entre chaque déplacement (1min)
    setInterval(moveMapToRandomLocation, 60000);
  </script>
</html>
